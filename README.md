# updiff
A simple script to upload modified project files to an ftp server. Works in connection with git. The list of modified files is obtained via `git diff --name-status` command.

## usage
`$ updiff.py [-t GIT-TAG] [-s SECTION] [-d [DIFF.FILE]]`

where:

`-t GIT-TAG` gives a starting point for the `git diff --name-status` command generating a list of modified files, if omitted defaults to `HEAD^`  
`-s SECTION` selects a section in the `updiff.ini` file with ftp settings to use, if omitted defaults to `[default]`  
`-d DIFF.FILE` specifies a file comtainig a list of modified files generated through the `git diff --name-status` command, if file name is omitted defaults to `updiff.files`, takes precedence over `-t`

Examples:  
`updiff.py -t v1.1` uploads all files modified since the commit tagged `v1.1`  
`updiff.py` uploads all files modified in the last commit  

## settings
The project directory should contain a settings file named `updiff.ini` with ftp connection parameters. These are:

```
[default]
; ftp server
host = ftp.example.com
; ftp login credentials
user = my_login
pwd = cnffjbeq
; path where the files are uploaded on the server
dir = project/dir/on/server
```

The password is expected to be rot13 coded. It can be generated by `codecs.encode('password', 'rot-13')` in python. 

If there are files that are not be uploaded to the server they should be listed in the `updiff.ignore` file. One file or directory name in each line (more like `.gitignore`). 

## requirements
Python 3.5 because of `subprocess.run()` used in the script.

## license
The MIT
